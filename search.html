<!doctype html>
<html lang="en">

<head>
 <meta charset="utf-8">
    <title>MinaFood - Search Page</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <!-- minafood -->
    <meta name="description"
        content="Otevřete brány gastronomického úspěchu. Naše komplexní řešení pro gastronomii poskytují pevný základ pro váš úspěch v gastronomickém světě. Od montáže a" />
    <meta name="robots" content="index, follow, max-snippet:-1, max-video-preview:-1, max-image-preview:large" />
    <link rel="canonical" href="https://minafoodsro.com/" />
    <meta property="og:image" content="https://github.com/BaoThongthai/minafood/blob/main/img/About-us.webp?raw=true" />
    <meta property="og:locale" content="cs_CZ" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Home - MINAFOOD" />
    <meta property="og:description"
        content="Otevřete brány gastronomického úspěchu. Naše komplexní řešení pro gastronomii poskytují pevný základ pro váš úspěch v gastronomickém světě. Od montáže a" />
    <meta property="og:url" content="https://minafoodsro.com/" />
    <meta property="og:updated_time" content="2024-04-03T14:31:59+00:00" />
    <meta property="article:published_time" content="2024-03-04T16:59:06+00:00" />
    <meta property="article:modified_time" content="2024-04-03T14:31:59+00:00" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Home - MINAFOOD" />
    <meta name="twitter:description"
        content="Otevřete brány gastronomického úspěchu. Naše komplexní řešení pro gastronomii poskytují pevný základ pro váš úspěch v gastronomickém světě. Od montáže a" />
    <meta name="twitter:label1" content="Napsal/a:" />
    <meta name="twitter:data1" content="visilab" />
    <meta name="twitter:label2" content="Doba čtení" />
    <meta name="twitter:data2" content="1 minuta" />

    <!-- Favicons -->
    <link href="img/logo.png" rel="icon">
    <link href="img/logo.png" rel="apple-touch-icon">

    <!-- Zalo Link Preview -->
    <meta name="zalo:image" content="https://github.com/BaoThongthai/minafood/blob/main/img/About-us.webp?raw=true" />
    <meta name="zalo:title"
        content="Otevřete brány gastronomického úspěchu. Naše komplexní řešení pro gastronomii poskytují pevný základ pro váš úspěch v gastronomickém světě. Od montáže a" />
    <meta name="zalo:description"
        content="Otevřete brány gastronomického úspěchu. Naše komplexní řešení pro gastronomii poskytují pevný základ pro váš úspěch v gastronomickém světě. Od montáže a" />

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Raleway:wght@600;800&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" /> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        referrerpolicy="no-referrer" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">


    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">



    
    <style>
        .mf-results {
            max-width: 1100px;
            margin: 24px auto;
            padding: 0 16px
        }

        .mf-head {
            display: flex;
            align-items: center;
            gap: 12px
        }

        .mf-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
            gap: 16px;
            margin-top: 16px
        }

        .mf-card {
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            padding: 12px
        }

        .mf-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 8px;
            background: #fafafa;
            border: 1px solid #eee
        }

        .mf-card h3 {
            font-size: 1rem;
            margin: .55rem 0 .25rem
        }

        .mf-card .meta {
            font-size: .82rem;
            color: #6b7280
        }

        .mf-card .price {
            font-weight: 700;
            margin-top: .35rem
        }

        .mf-empty {
            padding: 28px;
            border: 1px dashed #d1d5db;
            border-radius: 12px;
            background: #fafafa
        }
    </style>
</head>

<body>
        <!-- Navbar start -->
    <div class="container-fluid fixed-top">
        <div class="container topbar bg-primary d-none d-lg-block">
            <div class="d-flex justify-content-between">
                <div class="top-info ps-2">
                    <small class="me-3"><i class="fas fa-map-marker-alt me-2 text-secondary"></i> <a href="#"
                            class="text-white">Libušská 3/163, Praha - 142 00</a></small>
                    <small class="me-3"><i class="fas fa-envelope me-2 text-secondary"></i><a href="#"
                            class="text-white">htvgroup@seznam.cz</a></small>
                </div>
                <div class="top-link pe-2">
                    <small class="me-3"><i class="fas fa-phone-alt me-2 text-secondary"></i><a href="#"
                            class="text-white">+420 608 561 691</a></small>
                </div>
            </div>
        </div>
        <div class="container px-0">
            <nav class="navbar navbar-light bg-white navbar-expand-xl">
                <a href="index.html" class="navbar-brand">
                    <h1 class="text-primary display-6">M!NAFOOD</h1>
                </a>
                <button class="navbar-toggler py-2 px-3" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarCollapse">
                    <span class="fa fa-bars text-primary"></span>
                </button>
                <div class="collapse navbar-collapse bg-white" id="navbarCollapse">
                    <div class="navbar-nav mx-auto">
                        <a href="index.html" class="nav-item nav-link" data-i18n="nav.home">Home</a>
                        <a href="index.html#Kategorie" class="nav-item nav-link"
                            data-i18n="nav.categories">Kategorie</a>
                        <a href="index.html#Onas" class="nav-item nav-link" data-i18n="nav.about">O nás</a>
                         <a href="Galerie.html" class="nav-item nav-link" data-i18n="nav.Galerie">Galerie</a>
                        <a href="videa.html" class="nav-item nav-link" data-i18n="nav.Videa">Videa</a>
                        <a href="contact.html" class="nav-item nav-link" data-i18n="nav.contact">Contact</a>
                    </div>
                    <div class="d-flex m-3 me-0">
                        <!-- Language Toggle -->
                        <button id="langToggle" class="btn btn-outline-secondary btn-sm px-3"
                            style="margin-right: 20px;">EN</button>
                        <a href="cart.html" class="position-relative me-4 my-auto">
                            <i class="fa fa-shopping-bag fa-2x" style="color: #114070;"></i>
                            <span
                                class="position-absolute bg-secondary rounded-circle d-flex align-items-center justify-content-center text-dark px-1"
                                style="top: -5px; left: 15px; height: 20px; min-width: 20px;">0</span>
                        </a>
                        <a href="#" class="my-auto">
                            <i class="fas fa-user fa-2x" style="color: #114070;"></i>
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </div>
    <!-- Navbar End -->
    <!-- có thể include header của bạn ở đây -->
    <div class="mf-results">
        <div class="mf-head">
            <h1>Kết quả tìm kiếm</h1>
            <form id="mf-search-form" action="/search.html" class="mf-search">
                <input id="mf-search-input" name="q" type="search" placeholder="Tìm sản phẩm…" />
                <button type="submit">Tìm</button>
                <div id="mf-search-suggest" class="mf-suggest" hidden></div>
            </form>
        </div>
        <div id="mf-count"></div>
        <div id="mf-grid" class="mf-grid"></div>
        <div id="mf-empty" class="mf-empty" hidden>Không tìm thấy sản phẩm phù hợp.</div>
    </div>

    <script src="/js/mf_search.js"></script>

    <!-- Xử lý search và add to cart trong trang search -->
    <script>
(async () => {
  const params = new URLSearchParams(location.search);
  const qRaw = params.get('q') || '';
  const $ = (s, r=document) => r.querySelector(s);

  // điền lại ô search (nếu có)
  const input = $('#mf-search-input');
  if (input) input.value = qRaw;

  // ===== Utilities =====
  const deaccent = (s='') => s.normalize('NFD').replace(/[\u0300-\u036f]/g, '').toLowerCase();
  const attrSafe = (s='') => String(s).replace(/"/g, '&quot;');
  const fmtPrice = (price, currency) => {
    if (price == null || price === '' || isNaN(Number(price))) return '';
    const formatted = new Intl.NumberFormat('cs-CZ',{minimumFractionDigits:2,maximumFractionDigits:2}).format(Number(price));
    return `${formatted} ${currency ? currency : 'Kč bez DPH'}`;
  };

  // Lấy index từ mf_search.js (localStorage)
  async function pullIndex() {
    try {
      const cache = JSON.parse(localStorage.getItem('mf_search_index_v1') || 'null');
      if (cache && cache.items) return cache.items;
    } catch {}
    // fallback: nạp file rồi đọc lại cache
    await new Promise(res => {
      const s = document.createElement('script');
      s.src = '/js/mf_search.js';
      s.onload = () => setTimeout(res, 300);
      document.body.appendChild(s);
    });
    try {
      const cache = JSON.parse(localStorage.getItem('mf_search_index_v1') || 'null');
      return (cache && cache.items) ? cache.items : [];
    } catch { return []; }
  }

  // ===== Mini Cart (localStorage) =====
  const CART_KEY = 'mina_cart';
  function readCart(){ try{ return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); }catch{return []} }
  function writeCart(list){ localStorage.setItem(CART_KEY, JSON.stringify(list)); }
  function addToCart(item){
    const cart = readCart();
    const idx = cart.findIndex(x => String(x.id) === String(item.id));
    if (idx >= 0) { cart[idx].qty = (cart[idx].qty||0) + (item.qty||1); }
    else cart.push({...item, qty: item.qty || 1});
    writeCart(cart);
    updateCartBadge();
    // tương thích hệ thống cũ nếu có
    try { document.dispatchEvent(new CustomEvent('cart:add', { detail: item })); } catch {}
  }
  function cartCount(){
    return readCart().reduce((s, it) => s + (Number(it.qty)||0), 0);
  }
  function updateCartBadge(){
    const badge = document.querySelector('a[href="cart.html"] span.position-absolute');
    if (badge) badge.textContent = String(cartCount());
  }
  updateCartBadge();

  // ===== Rank & render =====
  const q = deaccent(qRaw.trim());
  const data = await pullIndex();

  const ranked = data
    .map(it => ({
      it,
      sc: (it._norm.includes(q) ? 10 : 0)
        + (it._norm.startsWith(q) ? 5 : 0)
        + q.split(/\s+/).filter(Boolean).reduce((a,t)=>a+(it._norm.includes(t)?2:0),0)
    }))
    .filter(x => x.sc > 0)
    .sort((a,b)=> b.sc - a.sc)
    .map(x => x.it);

  const grid  = $('#mf-grid');
  const count = $('#mf-count');
  const empty = $('#mf-empty');

  if (!ranked.length) { if (empty) empty.hidden = false; if (count) count.textContent='0 kết quả'; return; }
  if (count) count.textContent = `${ranked.length} kết quả cho “${qRaw}”`;

  grid.innerHTML = ranked.map(p => {
    const id = p.name || p.sku || p.url || p.page || '';
    const img = p.image || '/img/placeholder.webp';
    const priceBlock = (p.price != null && p.price !== '') ? `<div class="price">${fmtPrice(p.price, p.currency)}</div>` : '';
    return `
      <div class="mf-card" id="${encodeURIComponent(id)}">
        <img loading="lazy" src="${attrSafe(img)}" alt="">
        <h3>${attrSafe(p.name || '')}</h3>
        <div class="meta">${attrSafe(p.cat || '')}${p.sku ? (' • ' + attrSafe(p.sku)) : ''}</div>
        ${priceBlock}
        <div style="display:flex;gap:8px;margin-top:.5rem;flex-wrap:wrap">
          <a href="#"
             class="btn-add-to-cart"
             data-id="${attrSafe(id)}"
             data-name="${attrSafe(p.name || '')}"
             data-price="${p.price ?? ''}"
             data-currency="${attrSafe(p.currency || 'Kč')}"
             data-image="${attrSafe(img)}"
             style="border:1px solid #e5e7eb;border-radius:20px;padding:.35rem .8rem;font-weight:600;font-size:.9rem;">
             <i class="fa fa-shopping-bag" style="margin-right:6px"></i><span>Add to Cart</span>
          </a>
        </div>
      </div>
    `;
  }).join('');

  // ===== Add to Cart (event delegation) =====
  grid.addEventListener('click', (e) => {
    const btn = e.target.closest('.btn-add-to-cart');
    if (!btn) return;
    e.preventDefault();

    const priceNum = Number(btn.dataset.price || 0);
    const item = {
      id: btn.dataset.id,
      name: btn.dataset.name,
      price: isNaN(priceNum) ? 0 : priceNum,
      currency: btn.dataset.currency || 'Kč',
      image: btn.dataset.image || '/img/placeholder.webp',
      qty: 1
    };

    addToCart(item);

    btn.classList.add('disabled');
    const span = btn.querySelector('span');
    if (span) span.textContent = 'Added!';
    setTimeout(() => {
      btn.classList.remove('disabled');
      if (span) span.textContent = 'Add to Cart';
    }, 1200);
  });
})();
    </script>

    <!-- Back to Top -->
    <a href="#" class="btn btn-primary border-3 border-primary rounded-circle back-to-top"><i
            class="fa fa-arrow-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/lightbox/js/lightbox.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/cart.js"></script>
    
</body>

</html>